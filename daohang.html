<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>导航网站</title>
</head>
<link rel="stylesheet" href="./doahang.css">
<body>


    
    <header></header>
    <main>
        <div class="navigation" id="key-nav">
        </div>
    </main>
    <footer>

    </footer>
    <script>
    var keys={
        '0':{0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
        '1':{0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
        '2':{0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
        'length':3

    }

    var hash={'q':'qq.com','w':'weibo.com','i':'iqiyi.com','b':'baidu.com','z':'zhihu.com','t':'tencent.com'}

    var hashInlocalStorage=JSON.parse(localStorage.getItem('storage'||'null'))

    if(hashInlocalStorage)
    {
        hash=hashInlocalStorage;
    }
    
    
   
    for(var index1=0;index1<keys.length;index1++){
    var DIV1=document.createElement('div')//创建div标签
    document.getElementById('key-nav').appendChild(DIV1)
    

    var row=keys[index1]
    for(var index2=0;index2<row.length;index2++)
    {
        var span=document.createElement('span')
        var KBD1=document.createElement('kbd')//创建kbd标签
        span.textContent=row[index2]
         DIV1.appendChild(KBD1)//将创建的kbd标签，添加到div下

         KBD1.appendChild(span)//将span中的字添加到Kbd标签下
        //  KBD1.textContent=row[index2]
        span.className='text'
        KBD1.className='keystyle'
     

        var Bon=document.createElement('button')//创建button标签,用于修改每个键对应的网址
        KBD1.appendChild(Bon)//将创建的button标签，添加在kbd标签下
        icon=document.createElement('img');//创建img标签

        if(hash[row[index2]]){
        icon.src='https://'+hash[row[index2]]+'/favicon.ico';//获取哈希表存储的网站绝对路径下图标
        }


        else{
            icon.src='//i.loli.net/2019/07/16/5d2dc47a5436994204.png'
        }
        KBD1.appendChild(icon);//将创建的img标签，添加在kbd标签下, 用于显示导航网站图标
        Bon.textContent='编辑'
        Bon.id=row[index2]
        DIV1.className='keys'
        Bon.onclick=function(Click){
            KEY=Click.target.id
            console.log(KEY)
            x=prompt('输入新网站')
            hash[KEY]=x
            localStorage.setItem('storage',JSON.stringify(hash))
            console.log(hash)

        }


    }





    }


    document.onkeypress=function(s){
        key=s.key
        web=hash[key];
        window.open('http://'+web,'_blank');
    }
    
    </script>

    
</body>
</html>